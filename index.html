<html>
<head>
<style>
h2
{
font-size:32pt;
text-align:center;
}
button
{
height:80px;
width:80px;
font-size:15pt;
text-align:center;
vertical-align:center;
}
#answer
{
font-size:20pt;
text-align:right;
height:40px;
width:450px;
border:2px solid black;
}
</style>
<script>
var op=0;
var dec=[false,false];
var real=true;
var ans=[0,0];
var num=[0,0];
var point=[0,0];

function add(a,b){
	return [(a[0]+b[0]),(a[1]+b[1])];
}

function sub(a,b){
	return [(a[0]-b[0]),(a[1]-b[1])];
}

function multiply(a,b){
	return [(a[0]*b[0]-a[1]*b[1]),(a[0]*b[1]+a[1]*b[0])]
}

function divide(a,b){
	return [((a[1]*b[1]+a[0]*b[0])/(b[0]*b[0]+b[1]*b[1])),((a[1]*b[0]-a[0]*b[1])/(b[0]*b[0]+b[1]*b[1]))];
}

function display(n){
	n[0]=Math.floor(n[0]*100000000)/100000000;
	n[1]=Math.floor(n[1]*100000000)/100000000;
	if(n[1]>=0){
		return n[0]+" +"+n[1]+" i";
	}else{
		return n[0]+" "+n[1]+" i";
	}
}

function inputNum(k){
	if(real){
		if(!dec[0]){
			num[0]*=10;
			num[0]+=k;
		}else{
			point[0]++;
			num[0]+=(k/Math.pow(10,point[0]));
		}
	}else{
		if(!dec[1]){
			num[1]*=10;
			num[1]+=k;
		}else{
			point[1]++;
			num[1]+=(k/Math.pow(10,point[1]));
		}
	}
	document.getElementById('answer').innerHTML=display(num);
}

function setDec(){
	if(real){
		dec[0]=true;
	}else{
		dec[1]=true;
	}
}

function setReality(){
	real=!real;
}

function funx(r){
	if(op==0 && r!=5){
		ans=num;
		num=[0,0];
		point=[0,0];
		dec=[false,false];
		op=r;
	}else if(r==5){
		if(op==1){
			ans=sub(ans,num);
		}else if(op==2){
			ans=add(ans,num);
		}else if(op==3){
			ans=multiply(ans,num);
		}else if(op==4){
			ans=divide(ans,num);
		}
	}else if(r!=5 && op!=0){
		num=[0,0];
		point=[0,0];
		dec=[false,false];
		op=r;
	}
	real=true;
	document.getElementById('answer').innerHTML=display(ans);
}

function erase(){
	op=0;
	num=[0,0];
	ans=[0,0];
	point=[0,0];
	dec=[false,false];
	real=true;
	document.getElementById('answer').innerHTML=display([0,0]);
}

function invert(){
	if(real){
		num[0]*=-1;
	}else{
		num[1]*=-1;
	}
	document.getElementById('answer').innerHTML=display(num);
}

</script>
</head>
<body>
<h2>Complex Calculator</h2>
<div id='container'>
<div id='answer'>0 +0 i</div>
<button onclick='inputNum(7);'>7</button><button onclick='inputNum(8);'>8</button><button onclick='inputNum(9);'>9</button><button onclick='funx(4);'>/</button><br>
<button onclick='inputNum(4);'>4</button><button onclick='inputNum(5);'>5</button><button onclick='inputNum(6);'>6</button><button onclick='funx(3);'>*</button><button onclick='invert();'>+/-</button><br>
<button onclick='inputNum(1);'>1</button><button onclick='inputNum(2);'>2</button><button onclick='inputNum(3);'>3</button><button onclick='funx(1);'>-</button><button onclick='erase();'>AC</button><br>
<button onclick='inputNum(0);'>0</button><button onclick='setDec();'>.</button><button onclick='setReality();'>re/im</button><button onclick='funx(2);'>+</button><button onclick='funx(5);'>=</button>
</div>
</body>
</html>
